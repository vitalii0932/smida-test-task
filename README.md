# Тестове завдання Галайко Віталія
## _Розробка сервісу для Агентства з розвитку інфраструктури фондового ринку України_

___

### Завдання:
Завдання:
1. [x] Створення структури бази даних:

       Використовувати PostgreSQL для зберігання основної інформації про компанії та їх звіти.
       Використовувати MongoDB для зберігання детальної інформації про звіти (наприклад,
       детальні фінансові показники).

2. [x] Сутності:

       Компанія (Company):
           id (UUID)
           name (String)
           registration_number (String)
           address (String)
           created_at (Timestamp)

       Звіт (Report):
           id (UUID)
           company_id (UUID, зовнішній ключ на компанію)
           report_date (Timestamp)
           total_revenue (Decimal)
           net_profit (Decimal)

       Деталі звіту (ReportDetails) у MongoDB:
           report_id (UUID, зовнішній ключ на звіт)
           financial_data (JSON)
           comments (String)

3. Вимоги до функціональності:
   - [x] Реалізувати CRUD операції для компаній та їх звітів.
   - [x] Реалізувати ендпоінт для отримання всіх звітів конкретної компанії.
   - [x] Реалізувати ендпоінт для отримання детальної інформації про звіт.
   - [x] Забезпечити міграції бази даних за допомогою Liquibase.
   - [x] Запакувати сервіс у Docker-контейнер для легкого розгортання.
   - [x] Реалізувати аутентифікацію та авторизацію за допомогою Spring Security

### Технології

Для виконання даного завдання були використані наступні технології:

    - Java 11
    - Spring
    - Spring MVC
    - Spring Data JPA
    - Hibernate
    - Spring Data MongoDB
    - Liquibase
    - Spring Security with JWT
    - Docker
    - PostgreSQL
    - MongoDB
    - GitHub

### Завантаження

1. Клонуйте проект з GitHub:`git clone https://github.com/vitalii0932/smida-test-task.git`
2.  `mvn clean install`
3.  Запустіть проект

### Використання

1. Всі сторінки окрім сторінок авторизації під захистом. Тож для реєстарції можна:
    - перейти по шляху `/api/v1/auth/login_page` і натиснути на посилання на сторінку реєстрації (при спробі неавторизованого користувача перейти на будь-яку захищену сторінку його буде повертати на сторінку логіну)
    - перейти по шляху `/api/v1/auth/register_page`
     для реєстрації або авторизації необхідно ввести в поля дані по типу:
        ```json
        {
          "email": "admin_test@com.ua",
          "password": "admin"
        }
        ```
    - запиту на реєстрацію відправляються по шляху `/api/v1/auth/register`, а для авторизації по шляху `/api/v1/auth/authenticate`. Після чого повертається токен. В моїй системі він зберігається та зчитується з Cookie.
   #### Важливо:
   JWT токен вбудовується в Cookie, тож для того щоб його видалити необхідно або на будь-якій сторінці натиснути на кнопку виходу після чого Cookie буде видалено, або видалити його вручну.

2. Головна сторінка `/api/v1/companies`
    - на даній сторінці зберігаються дані про компації.
    - для створення необхідно натиснути на відповідну кнопку після чого ввести всі необхідні дані.
    - для редагування даних про компанію необхідно натиснути на кнопку `update` після чого оновити дані.
    - для видалення використовується кнопка `delete`.
    - для перегляду звітів компанії необхідно натиснути на відповідну кнопку.
3. Сторінка звітів компанії `/api/v1/reports/{companyId}`
    - на даній сторінці зберігаються дані про звіти компації.
    - для створення необхідно натиснути на відповідну кнопку після чого ввести всі необхідні дані.
    - для редагування даних про звіт необхідно натиснути на кнопку `update` після чого оновити дані.
    - для видалення використовується кнопка `delete`.
    - для перегляду деталей звіту компанії необхідно натиснути на відповідну кнопку.
    - для повернення на сторінку компанії необхідно натиснути на посилання з назвою поточної компанії в горі.
4. Сторінка звітів компанії `/api/v1/reports_details/{reportId}`
    - на даній сторінці зберігаються дані про деталі звіту.
    - для створення необхідно натиснути на відповідну кнопку після чого ввести всі необхідні дані.
    - для редагування даних про звіт необхідно натиснути на кнопку `update` після чого оновити дані.
    - у одного звіту лише одні деталі звіту, тож, якщо спробувати створити ще одні деталі, вас буде перенесено на сторінку оновлення вже створених деталій звіту.
    - для видалення використовується кнопка `delete`.
    - для повернення на сторінку компанії необхідно натиснути на посилання з назвою поточної компанії в горі.
   - для повернення на сторінку звіту компанії необхідно натиснути на посилання з датою звіту в горі.

___
## Автор
- [GitHub](https://github.com/vitalii0932)
- [Telegram](https://t.me/VitaliiGalayko)
- [LinkedIn](https://www.linkedin.com/in/vitalii-halaiko-199337281/)
- halaikovitalii@ukr.net